import{aQ as c,aR as n,aS as e,aT as u,aU as r,aV as P,aW as h,aX as f,aY as i,aZ as y,a_ as A,a$ as d,b0 as _,b1 as k,b2 as $,b3 as b}from"./index.c216104a.js";async function B(t){const o=await c(n(e,"users",t));if(o.exists()){const s=o.data();return{id:t,...s,createdAt:s.createdAt.toDate()}}return null}async function R(t){return(await _(i(e,"posts"),{...t,readCount:0,likeCount:0,commentCount:0,bookmarkCount:0,createdAt:d()})).id}async function U(t){const o=[];t!=null&&t.category&&o.push(u("category","==",t.category)),(t==null?void 0:t.tags)&&(t==null?void 0:t.tags.length)>0&&o.push(u("tags","array-contains-any",t==null?void 0:t.tags)),t!=null&&t.sort&&o.push(r(t.sort,"desc")),t!=null&&t.start&&o.push(P(t.start)),t!=null&&t.limit&&o.push(h(t.limit));const s=f(i(e,"posts"),...o),a=await y(s),S=a.docs.map(l=>{var w;const g=l.data();return{...g,id:l.id,createdAt:(w=g.createdAt)==null?void 0:w.toDate()}}),q=a.docs[a.docs.length-1];return{items:S,lastItem:q}}async function D(t){var a;const o=await c(n(e,"posts",t));if(!o.exists())throw new Error("No such Document!");const s=o.data();return console.log(s),{id:o.id,...s,createdAt:(a=s.createdAt)==null?void 0:a.toDate()}}async function C(t){await A(n(e,"posts",t),{readCount:$(1)})}async function v(t){await C(t);const o=await D(t),s=await B(o.uid);return{post:o,postUser:s}}async function L(t,o){await A(n(e,"posts",t),{...o,updatedAt:d()})}async function T(t){await k(n(e,"posts",t))}async function j(t,o){await b(n(e,"post_likes",`${t}_${o}`),{uid:t,postId:o,createdAt:d()})}async function E(t,o){await k(n(e,"post_likes",`${t}_${o}`))}async function I(t,o){return(await c(n(e,"post_likes",`${t}_${o}`))).exists()}async function N(t,o){await b(n(e,"users",t,"bookmark",o),{createdAt:d()})}async function Q(t,o){await k(n(e,"users",t,"bookmark",o))}async function V(t,o){return(await c(n(e,"users",t,"bookmark",o))).exists()}async function W(t){const o=f(i(e,"users",t,"bookmark"),r("createdAt","desc"),h(6)),s=await y(o);return Promise.all(s.docs.map(a=>D(a.id)))}async function X(){const t=f(i(e,"tags"),u("count",">",0),r("count","desc")),o=await y(t);return console.log(o),o.docs.map(s=>s.data())}export{U as a,B as b,R as c,j as d,V as e,Q as f,X as g,I as h,N as i,W as j,v as k,T as l,D as m,E as r,L as u};
