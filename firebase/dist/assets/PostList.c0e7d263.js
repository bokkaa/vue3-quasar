import{L as w,O as T,Q as B,W as x,h as M,a3 as H,a5 as I,s as $,u as A,aI as D,o as a,i as k,q as r,j as n,a8 as b,aG as o,aJ as R,c as t,d as f,t as u,a as z,F as L,f as S,ad as Q,w as q,aa as N,ag as P}from"./index.a776dc34.js";import{Q as U}from"./QChip.8a241414.js";import{u as F,a as V,_ as v}from"./useBookmark.e31a7b7b.js";import{b as j}from"./post.702f68c3.js";const O=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],E=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var C=w({name:"QSkeleton",props:{...T,tag:{type:String,default:"div"},type:{type:String,validator:e=>O.includes(e),default:"rect"},animation:{type:String,validator:e=>E.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:s}){const d=I(),i=B(e,d.proxy.$q),m=x(()=>{const l=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:l[0],height:l[1]}}),c=x(()=>`q-skeleton q-skeleton--${i.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>M(e.tag,{class:c.value,style:m.value},H(s.default))}});function G(e){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),d=new Date,i=Math.abs(e-d),m=Math.floor(i/1e3),c=Math.floor(m/60),l=Math.floor(c/60),h=Math.floor(l/24),y=Math.floor(h/365);return y>0?s.format(-1*y,"year"):h>0?s.format(-1*h,"day"):l>0?s.format(-1*l,"hour"):c>0?s.format(-1*c,"minute"):s.format(-1*m,"second")}const J=["src"],W={class:"flex items-center"},K={key:1},X=t("span",{class:"q-mx-xs"},"\xB7",-1),Y={class:"text-h6 qmt-sm"},Z={class:"text-primary text-caption"},ee={key:0,class:"text-grey-6 q-my-sm ellipsis-2-lines"},te=["innerHTML"],se={class:"row items-center"},ae={class:"col-3"},oe={class:"flex flex-center"},ne={class:"col-3"},ie={class:"flex flex-center"},le={class:"col-3"},re={class:"flex flex-center"},ce={class:"col-3"},de={class:"flex flex-center"},me={__name:"PostItem",props:{item:{type:Object,default:()=>({})},escapeHTML:{type:Boolean,default:!1}},setup(e){const s=e;$(A());const{isLike:d,likeCount:i,toggleLike:m}=F(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:c,bookmarkCount:l,toggleBookmark:h}=V(s.item.id,{initialCount:s.item.bookmarkCount}),{state:y,isLoading:g}=D(()=>j(s.item.uid),{});return(ue,fe)=>(a(),k(N,{class:"bg-white q-pt-md",clickable:"",to:`/posts/${e.item.id}`},{default:r(()=>[n(b,{avatar:"",top:""},{default:r(()=>[o(g)?(a(),k(C,{key:0,type:"circle"})):(a(),k(R,{key:1},{default:r(()=>{var _;return[t("img",{src:(_=o(y))==null?void 0:_.photoURL,alt:""},null,8,J)]}),_:1}))]),_:1}),n(b,null,{default:r(()=>{var _;return[t("div",W,[o(g)?(a(),k(C,{key:0,type:"rect",width:"40px"})):(a(),f("span",K,u((_=o(y))==null?void 0:_.displayName),1)),X,t("span",null,u(o(G)(e.item.createdAt)),1),n(U,{class:"q-ml-sm",dense:"",color:"primary","text-color":"white"},{default:r(()=>[z(u(e.item.category),1)]),_:1})]),t("div",Y,u(e.item.title),1),t("div",Z,[(a(!0),f(L,null,S(e.item.tags,p=>(a(),f("span",{key:p,class:"q-mr-sm"},"#"+u(p),1))),128))]),e.escapeHTML?(a(),f("div",ee,u(e.item.content),1)):(a(),f("div",{key:1,class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:e.item.content},null,8,te)),t("div",se,[t("div",ae,[t("div",oe,[n(v,{name:"sym_o_visibility",label:e.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),t("div",ne,[t("div",ie,[n(v,{name:"sym_o_sms",label:e.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),t("div",le,[t("div",re,[n(Q,{flat:"",dense:"",class:"full-width",onClick:q(o(m),["prevent"])},{default:r(()=>[n(v,{name:o(d)?"favorite":"sym_o_favorite",label:o(i),tooltip:"\uC88B\uC544\uC694\uC218"},null,8,["name","label"])]),_:1},8,["onClick"])])]),t("div",ce,[t("div",de,[n(Q,{flat:"",dense:"",class:"full-width",onClick:q(o(h),["prevent"])},{default:r(()=>[n(v,{name:o(c)?"bookmark":"sym_o_bookmark",label:o(l),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}},ve={__name:"PostList",props:{items:Array,default:()=>[],escapeHTML:{type:Boolean,default:!1}},setup(e){return(s,d)=>(a(),k(P,{bordered:"",separator:""},{default:r(()=>[(a(!0),f(L,null,S(e.items,i=>(a(),k(me,{key:i.id,item:i,escapeHTML:e.escapeHTML},null,8,["item","escapeHTML"]))),128))]),_:1}))}};export{C as Q,ve as _};
