import{L as se,bq as le,M as ie,br as re,bs as B,bt as ue,P as ce,V as c,W as y,ay as de,R as ve,bu as fe,bv as me,bw as he,X as ge,bx as ke,Z as b,a0 as L,by as E,I as A,bz as ye,K as q,C as H,bA as be,h as D,bl as pe,a4 as Te,bB as N,a3 as Se,J as we,bC as Ce,o as I,d as Pe,j as xe,x as Oe,a8 as Be,c as Le,t as M,i as Ee,q as Ae,a as qe,e as He,s as V,u as j,bD as _}from"./index.c216104a.js";import{h as De,r as Ne,d as Ie,e as Me,f as Ve,i as je}from"./post.ad5c1677.js";var _e=se({name:"QTooltip",inheritAttrs:!1,props:{...le,...ie,...re,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:B},self:{type:String,default:"top middle",validator:B},offset:{type:Array,default:()=>[14,14],validator:ue},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...ce],setup(e,{slots:d,emit:v,attrs:l}){let n,t;const s=Te(),{proxy:{$q:a}}=s,i=c(null),u=c(!1),m=y(()=>N(e.anchor,a.lang.rtl)),R=y(()=>N(e.self,a.lang.rtl)),W=y(()=>e.persistent!==!0),{registerTick:Q,removeTick:z}=de(),{registerTimeout:k}=ve(),{transitionProps:$,transitionStyle:J}=fe(e),{localScrollTarget:S,changeScrollEvent:K,unconfigureScrollTarget:U}=me(e,x),{anchorEl:r,canShow:X,anchorEvents:h}=he({showing:u,configureAnchorEl:ae}),{show:Z,hide:p}=ge({showing:u,canShow:X,handleShow:G,handleHide:Y,hideOnRouteChange:W,processOnMount:!0});Object.assign(h,{delayShow:ee,delayHide:te});const{showPortal:w,hidePortal:C,renderPortal:F}=ke(s,i,ne,"tooltip");if(a.platform.is.mobile===!0){const o={anchorEl:r,innerRef:i,onClickOutside(f){return p(f),f.target.classList.contains("q-dialog__backdrop")&&we(f),!0}},T=y(()=>e.modelValue===null&&e.persistent!==!0&&u.value===!0);b(T,f=>{(f===!0?Ce:E)(o)}),L(()=>{E(o)})}function G(o){w(),Q(()=>{t=new MutationObserver(()=>g()),t.observe(i.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),g(),x()}),n===void 0&&(n=b(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,g)),k(()=>{w(!0),v("show",o)},e.transitionDuration)}function Y(o){z(),C(),P(),k(()=>{C(!0),v("hide",o)},e.transitionDuration)}function P(){t!==void 0&&(t.disconnect(),t=void 0),n!==void 0&&(n(),n=void 0),U(),A(h,"tooltipTemp")}function g(){ye({targetEl:i.value,offset:e.offset,anchorEl:r.value,anchorOrigin:m.value,selfOrigin:R.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ee(o){if(a.platform.is.mobile===!0){q(),document.body.classList.add("non-selectable");const T=r.value,f=["touchmove","touchcancel","touchend","click"].map(O=>[T,O,"delayHide","passiveCapture"]);H(h,"tooltipTemp",f)}k(()=>{Z(o)},e.delay)}function te(o){a.platform.is.mobile===!0&&(A(h,"tooltipTemp"),q(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),k(()=>{p(o)},e.hideDelay)}function ae(){if(e.noParentEvent===!0||r.value===null)return;const o=a.platform.is.mobile===!0?[[r.value,"touchstart","delayShow","passive"]]:[[r.value,"mouseenter","delayShow","passive"],[r.value,"mouseleave","delayHide","passive"]];H(h,"anchor",o)}function x(){if(r.value!==null||e.scrollTarget!==void 0){S.value=be(r.value,e.scrollTarget);const o=e.noParentEvent===!0?g:p;K(S.value,o)}}function oe(){return u.value===!0?D("div",{...l,ref:i,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,J.value],role:"tooltip"},Se(d.default)):null}function ne(){return D(pe,$.value,oe)}return L(P),Object.assign(s.proxy,{updatePosition:g}),F}});const Re={class:"text-grey q-ml-xs text-body2"},ze={__name:"PostIcon",props:{name:{type:String},label:{type:[String,Number]},tooltip:{type:String}},setup(e){return(d,v)=>(I(),Pe("div",null,[xe(Be,Oe({name:e.name,color:"grey",size:"xs"},d.$attrs),null,16,["name"]),Le("span",Re,M(e.label),1),e.tooltip?(I(),Ee(_e,{key:0,offset:[0,4]},{default:Ae(()=>[qe(M(e.tooltip),1)]),_:1})):He("",!0)]))}},$e=(e,d)=>{const{initialCount:v}=d||{},{uid:l,isAuthenticated:n}=V(j()),t=c(!1),s=c(v),a=c(e),i=async()=>{if(n.value===!1){t.value=!1;return}t.value=await De(l.value,a.value)},u=async()=>{if(n.value===!1){alert("\uB85C\uADF8\uC778\uC774 \uD544\uC694\uD55C \uC11C\uBE44\uC2A4\uC785\uB2C8\uB2E4.");return}t.value===!0?(await Ne(l.value,a.value),s.value--):(await Ie(l.value,a.value),s.value++),t.value=!t.value};return b(n,()=>i(),{immediate:!0}),{isLike:t,likeCount:_(s),updateLikeCount:m=>s.value=m,toggleLike:u}},Je=(e,d)=>{const{initialCount:v}=d||{},{uid:l,isAuthenticated:n}=V(j()),t=c(!1),s=c(v),a=c(e),i=async()=>{if(n.value===!1){t.value=!1;return}t.value=await Me(l.value,a.value)},u=async()=>{if(n.value===!1){alert("\uB85C\uADF8\uC778\uC774 \uD544\uC694\uD55C \uC11C\uBE44\uC2A4\uC785\uB2C8\uB2E4.");return}t.value===!0?(await Ve(l.value,a.value),s.value--):(await je(l.value,a.value),s.value++),t.value=!t.value};return b(n,()=>i(),{immediate:!0}),{isBookmark:t,bookmarkCount:_(s),updateBookmarkCount:m=>s.value=m,toggleBookmark:u}};export{ze as _,Je as a,$e as u};
