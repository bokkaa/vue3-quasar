import{s as C,u as g,aH as w,o as k,i as B,q as l,j as o,a7 as x,aI as M,c as t,aF as a,t as d,a as q,d as y,F as L,f as T,ac as b,w as p,a9 as I}from"./index.c216104a.js";import{Q}from"./QChip.b717a8c6.js";import{u as A,a as F,_ as f}from"./useBookmark.6c3e2fff.js";import{b as N}from"./post.ad5c1677.js";function R(e){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),_=new Date,h=Math.abs(e-_),u=Math.floor(h/1e3),i=Math.floor(u/60),n=Math.floor(i/60),c=Math.floor(n/24),r=Math.floor(c/365);return r>0?s.format(-1*r,"year"):c>0?s.format(-1*c,"day"):n>0?s.format(-1*n,"hour"):i>0?s.format(-1*i,"minute"):s.format(-1*u,"second")}const S=["src"],D={class:"flex items-center"},H=t("span",{class:"q-mx-xs"},"\xB7",-1),U={class:"text-h6 qmt-sm"},V={class:"text-primary text-caption"},j=["innerHTML"],$={class:"row items-center"},E={class:"col-3"},O={class:"flex flex-center"},P={class:"col-3"},z={class:"flex flex-center"},G={class:"col-3"},J={class:"flex flex-center"},K={class:"col-3"},W={class:"flex flex-center"},ot={__name:"PostItem",props:{item:{type:Object,default:()=>({})}},setup(e){const s=e;C(g());const{isLike:_,likeCount:h,toggleLike:u}=A(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:i,bookmarkCount:n,toggleBookmark:c}=F(s.item.id,{initialCount:s.item.bookmarkCount}),{state:r}=w(()=>N(s.item.uid),{});return(X,Y)=>(k(),B(I,{class:"bg-white q-pt-md",clickable:"",to:`/posts/${e.item.id}`},{default:l(()=>[o(x,{avatar:"",top:""},{default:l(()=>[o(M,null,{default:l(()=>{var m;return[t("img",{src:(m=a(r))==null?void 0:m.photoURL,alt:""},null,8,S)]}),_:1})]),_:1}),o(x,null,{default:l(()=>{var m;return[t("div",D,[t("span",null,d((m=a(r))==null?void 0:m.displayName),1),H,t("span",null,d(a(R)(e.item.createdAt)),1),o(Q,{class:"q-ml-sm",dense:"",color:"primary","text-color":"white"},{default:l(()=>[q(d(e.item.category),1)]),_:1})]),t("div",U,d(e.item.title),1),t("div",V,[(k(!0),y(L,null,T(e.item.tags,v=>(k(),y("span",{key:v,class:"q-mr-sm"},"#"+d(v),1))),128))]),t("div",{class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:e.item.content},null,8,j),t("div",$,[t("div",E,[t("div",O,[o(f,{name:"sym_o_visibility",label:e.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),t("div",P,[t("div",z,[o(f,{name:"sym_o_sms",label:e.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),t("div",G,[t("div",J,[o(b,{flat:"",dense:"",class:"full-width",onClick:p(a(u),["prevent"])},{default:l(()=>[o(f,{name:a(_)?"favorite":"sym_o_favorite",label:a(h),tooltip:"\uC88B\uC544\uC694\uC218"},null,8,["name","label"])]),_:1},8,["onClick"])])]),t("div",K,[t("div",W,[o(b,{flat:"",dense:"",class:"full-width",onClick:p(a(c),["prevent"])},{default:l(()=>[o(f,{name:a(i)?"bookmark":"sym_o_bookmark",label:a(n),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}};export{ot as _};
